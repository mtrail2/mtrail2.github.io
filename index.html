<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Narrative Visualization</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>How Depression Rates in Individuals Changed Over COVID</h1>
  <div id="info">
    <p>
      COVID was a challenging time for many. One way we have to measure this is the CDC household pulse survey which was a survey sent to houseohlds
      and individuals to get an estimate of the mental health situation of the United States. The link to the dataset is found at the bottom of this
      narrative visualization, and also included in this repository. This survey sent out includes questions that individuals would answer, and based on their
      answers were given a score of whether or not they were showcasing symptoms of depression or anxiety, or both. It is improtant to note that these
      results are not formal medical results, but instead help compliment other COVID related research. In this visualization you will see language
      such as "Depression Rate", but keep in mind this is meant to convey a sense of clarification to the user. What his data formally displays, is
      the percentage of households that show strong symptoms of depression within a 95% confidence interval.
    </p>
    <p>
      With that, let us first show a broad overview of how the population of the United States was doing during COVID from April 2020 - August 2024.
      Please click the advance time button below to see how the depression rate changed over time.

    </p>
  </div>

  <div>
    <button id="advanceBtn">Advance Time</button>
  </div>

  <!-- <button id="advanceBtn">Advance Time</button> -->
  <!-- This is the chart itself -->
  <svg width="800" height="600"></svg>

  <div id="info">
    <p>
      As you can see on Dec 11th, 2020 the first COVID vaccines for Pfizer and Moderna were approved byu the FDA to be given to the population.
      Only a couple months after that and almost a third of the US had been vaccinated, and the depression rate had gone down roughly 10%.
    </p>
  </div>

  <!-- Now lets setup part two of the visualization -->
  <h1>Simulate and Explore Yourself</h1>
  <div id="info">
    <p>
      Also included in the dataset are various attributes related to each individual or household that participated, including: age, sex, ethnicity, and education level.
      Please select which set of attributes best represent yourself, or other attributes you wish to see, and learn how the depression rate of those groups of people
      changed over time. It is important to note that this is an approximation, there are seperate entries for each attribute, so to simulate groups with mutliple 
      attributes, the values are averaged. For example, for males in the age rage of 18-29, the depression rates for males are averaged with the depression rates
      for the age range 18-29. This means mutliple attributes are not an exact match, but this can be used to get a rough estimate of how the depression rate of 
      certain attribute groups changed.
    </p>
  </div>
  <div>
    <label for="age">Age Group:</label>
    <select id="age">
      <option value="">Select Age Group</option>
      <option value="18 - 29 years">18 - 29</option>
      <option value="30 - 39 years">30 - 39</option>
      <option value="40 - 49 years">40 - 49</option>
      <option value="50 - 59 years">50 - 59</option>
      <option value="60 - 69 years">60 - 69</option>
      <option value="70 - 79 years">70 - 79</option>
      <option value="80 years and above">80+</option>
    </select>

    <label for="sex">Sex:</label>
    <select id="sex">
      <option value="">Select Sex</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

    <label for="ethnicity">Ethnicity:</label>
    <select id="ethnicity">
      <option value="">Select Ethnicity</option>
      <option value="Hispanic or Latino">Hispanic or Latino</option>
      <option value="Non-Hispanic White, single race">White</option>
      <option value="Non-Hispanic Black, single race">Black</option>
      <option value="Non-Hispanic Asian, single race">Asian</option>
      <option value="Non-Hispanic, other races and multiple races">Other</option>
    </select>

    <label for="education">Education Level:</label>
    <select id="education">
      <option value="">Select Education Level</option>
      <option value="Less than a high school diploma">Less than high school diploma</option>
      <option value="High school diploma or GED">High school diploma or GED</option>
      <option value="Some college/Associate's degree">Some college/Associate's degree</option>
      <option value="Bachelor's degree or higher">Bachelor's degree or higher</option>
    </select>

    <button id="update-query">Simulate</button>
  </div>
  <svg id="query-canvas" width="800" height="600"></svg>

  <div id="info">
    <p>
      Link to the dataset: https://data.cdc.gov/National-Center-for-Health-Statistics/Indicators-of-Anxiety-or-Depression-Based-on-Repor/8pt5-q6wp/about_data
    </p>
  </div>

  <!-- D3 & Dependencies -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js" integrity="sha512-iBAeBWWWFb8HqSBcrqcz98iIpuVH1la39dEYHtyQ/pGpeCQTQVvLJOWAuhv2Q7JSHp9k7hWA7sGxU3hHJe+tFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
  <script src="https://unpkg.com/topojson-client@3"></script>
  
  <div id="tooltip" style="
    position: absolute;
    text-align: left;
    width: auto;
    padding: 8px;
    font-size: 13px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 5px;
    pointer-events: none;
    opacity: 0;
  "></div>

  <script src="script.js"></script>
</body>
</html>